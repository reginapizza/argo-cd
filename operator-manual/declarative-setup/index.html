
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-6.1.7">
    
    
      
        <title>Declarative Setup - Argo CD - Declarative GitOps CD for Kubernetes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.19753c6b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.196e0c26.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,400i,700%7C&display=fallback">
        <style>body,input{font-family:"Work Sans",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../css/version-select.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-105170809-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#declarative-setup" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../.." title="Argo CD - Declarative GitOps CD for Kubernetes" class="md-header-nav__button md-logo" aria-label="Argo CD - Declarative GitOps CD for Kubernetes">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Argo CD - Declarative GitOps CD for Kubernetes
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Declarative Setup
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/argoproj/argo-cd/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Argo CD - Declarative GitOps CD for Kubernetes" class="md-nav__button md-logo" aria-label="Argo CD - Declarative GitOps CD for Kubernetes">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Argo CD - Declarative GitOps CD for Kubernetes
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/argoproj/argo-cd/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../understand_the_basics/" class="md-nav__link">
      Understand The Basics
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../core_concepts/" class="md-nav__link">
      Core Concepts
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../getting_started/" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    <label class="md-nav__link" for="nav-5">
      Operator Manual
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Operator Manual" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Operator Manual
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../architecture/" class="md-nav__link">
      Architectural Overview
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Declarative Setup
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Declarative Setup
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of Contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of Contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-reference" class="md-nav__link">
    Quick Reference
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applications" class="md-nav__link">
    Applications
  </a>
  
    <nav class="md-nav" aria-label="Applications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#app-of-apps" class="md-nav__link">
    App of Apps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#projects" class="md-nav__link">
    Projects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#repositories" class="md-nav__link">
    Repositories
  </a>
  
    <nav class="md-nav" aria-label="Repositories">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repository-credentials" class="md-nav__link">
    Repository Credentials
  </a>
  
    <nav class="md-nav" aria-label="Repository Credentials">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssh-repositories" class="md-nav__link">
    SSH repositories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#https-repositories" class="md-nav__link">
    HTTPS repositories
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repositories-using-self-signed-tls-certificates-or-are-signed-by-custom-ca" class="md-nav__link">
    Repositories using self-signed TLS certificates (or are signed by custom CA)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-known-host-public-keys" class="md-nav__link">
    SSH known host public keys
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clusters" class="md-nav__link">
    Clusters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helm-chart-repositories" class="md-nav__link">
    Helm Chart Repositories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-exclusioninclusion" class="md-nav__link">
    Resource Exclusion/Inclusion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sso-rbac" class="md-nav__link">
    SSO &amp; RBAC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manage-argo-cd-using-argo-cd" class="md-nav__link">
    Manage Argo CD Using Argo CD
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ingress/" class="md-nav__link">
      Ingress Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5" >
    <label class="md-nav__link" for="nav-5-5">
      User Management
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="User Management" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        <span class="md-nav__icon md-icon"></span>
        User Management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../user-management/" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user-management/auth0/" class="md-nav__link">
      Auth0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user-management/microsoft/" class="md-nav__link">
      Microsoft
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user-management/okta/" class="md-nav__link">
      Okta
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user-management/onelogin/" class="md-nav__link">
      OneLogin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user-management/keycloak/" class="md-nav__link">
      Keycloak
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user-management/openunison/" class="md-nav__link">
      OpenUnison
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../user-management/google/" class="md-nav__link">
      Google
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rbac/" class="md-nav__link">
      RBAC Configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../security/" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cluster-bootstrapping/" class="md-nav__link">
      Cluster Bootstrapping
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secret-management/" class="md-nav__link">
      Secret Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../high_availability/" class="md-nav__link">
      High Availability
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../disaster_recovery/" class="md-nav__link">
      Disaster Recovery
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../webhook/" class="md-nav__link">
      Git Webhook Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../health/" class="md-nav__link">
      Resource Health
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../custom_tools/" class="md-nav__link">
      Custom Tooling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../custom-styles/" class="md-nav__link">
      Custom Styles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metrics/" class="md-nav__link">
      Metrics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../notifications/" class="md-nav__link">
      Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../troubleshooting/" class="md-nav__link">
      Troubleshooting Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-18" type="checkbox" id="nav-5-18" >
    <label class="md-nav__link" for="nav-5-18">
      Server Configuration Parameters
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Server Configuration Parameters" data-md-level="2">
      <label class="md-nav__title" for="nav-5-18">
        <span class="md-nav__icon md-icon"></span>
        Server Configuration Parameters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../server-commands/argocd-server/" class="md-nav__link">
      Argocd server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../server-commands/argocd-application-controller/" class="md-nav__link">
      Argocd application controller
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../server-commands/argocd-repo-server/" class="md-nav__link">
      Argocd repo server
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../server-commands/argocd-util/" class="md-nav__link">
      argocd-util Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-20" type="checkbox" id="nav-5-20" >
    <label class="md-nav__link" for="nav-5-20">
      Upgrading
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Upgrading" data-md-level="2">
      <label class="md-nav__title" for="nav-5-20">
        <span class="md-nav__icon md-icon"></span>
        Upgrading
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrading/overview/" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrading/1.7-1.8/" class="md-nav__link">
      v1.7 to 1.8
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrading/1.6-1.7/" class="md-nav__link">
      v1.6 to 1.7
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrading/1.5-1.6/" class="md-nav__link">
      v1.5 to 1.6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrading/1.4-1.5/" class="md-nav__link">
      v1.4 to 1.5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrading/1.3-1.4/" class="md-nav__link">
      v1.3 to 1.4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrading/1.2-1.3/" class="md-nav__link">
      v1.2 to 1.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrading/1.1-1.2/" class="md-nav__link">
      v1.1 to 1.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrading/1.0-1.1/" class="md-nav__link">
      v1.0 to 1.1
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
    <label class="md-nav__link" for="nav-6">
      User Guide
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="User Guide" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/application_sources/" class="md-nav__link">
      Tools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/kustomize/" class="md-nav__link">
      Kustomize
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/helm/" class="md-nav__link">
      Helm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/ksonnet/" class="md-nav__link">
      Ksonnet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/jsonnet/" class="md-nav__link">
      Jsonnet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/config-management-plugins/" class="md-nav__link">
      Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/tool_detection/" class="md-nav__link">
      Tool Detection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/projects/" class="md-nav__link">
      Projects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/private-repositories/" class="md-nav__link">
      Private Repositories
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/gpg-verification/" class="md-nav__link">
      GnuPG verification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/auto_sync/" class="md-nav__link">
      Automated Sync Policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/diffing/" class="md-nav__link">
      Diffing Customization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/orphaned-resources/" class="md-nav__link">
      Orphaned Resources Monitoring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/compare-options/" class="md-nav__link">
      Compare Options
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/sync-options/" class="md-nav__link">
      Sync Options
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/parameters/" class="md-nav__link">
      Parameter Overrides
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/build-environment/" class="md-nav__link">
      Build Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/tracking_strategies/" class="md-nav__link">
      Tracking and Deployment Strategies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/resource_hooks/" class="md-nav__link">
      Resource Hooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/selective_sync/" class="md-nav__link">
      Selective Sync
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/sync-waves/" class="md-nav__link">
      Sync Phases and Waves
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/sync_windows/" class="md-nav__link">
      Sync Windows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/ci_automation/" class="md-nav__link">
      Automation from CI Pipelines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/app_deletion/" class="md-nav__link">
      App Deletion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/best_practices/" class="md-nav__link">
      Best Practices
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/status-badge/" class="md-nav__link">
      Status Badge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user-guide/commands/argocd/" class="md-nav__link">
      Command Reference
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
    <label class="md-nav__link" for="nav-7">
      Developer Guide
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Developer Guide" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Developer Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/contributing/" class="md-nav__link">
      Contribution guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/running-locally/" class="md-nav__link">
      Running ArgoCD locally
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/debugging-remote-environment/" class="md-nav__link">
      Debugging a Remote ArgoCD Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/api-docs/" class="md-nav__link">
      API Docs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/test-e2e/" class="md-nav__link">
      E2E Tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/dependencies/" class="md-nav__link">
      Managing Dependencies
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/ci/" class="md-nav__link">
      Continuous Integration (CI)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/releasing/" class="md-nav__link">
      Releasing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/site/" class="md-nav__link">
      Site
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developer-guide/faq/" class="md-nav__link">
      Contribution FAQ
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../faq/" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../security_considerations/" class="md-nav__link">
      Security Considerations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../SUPPORT/" class="md-nav__link">
      Support
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../roadmap/" class="md-nav__link">
      Roadmap
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://github.com/argoproj/argo-cd/releases" class="md-nav__link">
      Releases ⧉
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://blog.argoproj.io/" class="md-nav__link">
      Blog ⧉
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of Contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of Contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#quick-reference" class="md-nav__link">
    Quick Reference
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applications" class="md-nav__link">
    Applications
  </a>
  
    <nav class="md-nav" aria-label="Applications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#app-of-apps" class="md-nav__link">
    App of Apps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#projects" class="md-nav__link">
    Projects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#repositories" class="md-nav__link">
    Repositories
  </a>
  
    <nav class="md-nav" aria-label="Repositories">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#repository-credentials" class="md-nav__link">
    Repository Credentials
  </a>
  
    <nav class="md-nav" aria-label="Repository Credentials">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ssh-repositories" class="md-nav__link">
    SSH repositories
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#https-repositories" class="md-nav__link">
    HTTPS repositories
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#repositories-using-self-signed-tls-certificates-or-are-signed-by-custom-ca" class="md-nav__link">
    Repositories using self-signed TLS certificates (or are signed by custom CA)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-known-host-public-keys" class="md-nav__link">
    SSH known host public keys
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clusters" class="md-nav__link">
    Clusters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helm-chart-repositories" class="md-nav__link">
    Helm Chart Repositories
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-exclusioninclusion" class="md-nav__link">
    Resource Exclusion/Inclusion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sso-rbac" class="md-nav__link">
    SSO &amp; RBAC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manage-argo-cd-using-argo-cd" class="md-nav__link">
    Manage Argo CD Using Argo CD
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/argoproj/argo-cd/edit/master/docs/operator-manual/declarative-setup.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="declarative-setup">Declarative Setup<a class="headerlink" href="#declarative-setup" title="Permanent link">&para;</a></h1>
<p>Argo CD applications, projects and settings can be defined declaratively using Kubernetes manifests. These can be updated using <code>kubectl apply</code>, without needing to touch the <code>argocd</code> command-line tool.</p>
<h2 id="quick-reference">Quick Reference<a class="headerlink" href="#quick-reference" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>File Name</th>
<th>Resource Name</th>
<th>Kind</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="../argocd-cm.yaml"><code>argocd-cm.yaml</code></a></td>
<td>argocd-cm</td>
<td>ConfigMap</td>
<td>General Argo CD configuration</td>
</tr>
<tr>
<td><a href="../argocd-secret.yaml"><code>argocd-secret.yaml</code></a></td>
<td>argocd-secret</td>
<td>Secret</td>
<td>Password, Certificates, Signing Key</td>
</tr>
<tr>
<td><a href="../argocd-rbac-cm.yaml"><code>argocd-rbac-cm.yaml</code></a></td>
<td>argocd-rbac-cm</td>
<td>ConfigMap</td>
<td>RBAC Configuration</td>
</tr>
<tr>
<td><a href="../argocd-tls-certs-cm.yaml"><code>argocd-tls-certs-cm.yaml</code></a></td>
<td>argocd-tls-certs-cm</td>
<td>ConfigMap</td>
<td>Custom TLS certificates for connecting Git repositories via HTTPS (v1.2 and later)</td>
</tr>
<tr>
<td><a href="../argocd-ssh-known-hosts-cm.yaml"><code>argocd-ssh-known-hosts-cm.yaml</code></a></td>
<td>argocd-ssh-known-hosts-cm</td>
<td>ConfigMap</td>
<td>SSH known hosts data for connecting Git repositories via SSH (v1.2 and later)</td>
</tr>
<tr>
<td><a href="../application.yaml"><code>application.yaml</code></a></td>
<td>-</td>
<td>Application</td>
<td>Example application spec</td>
</tr>
<tr>
<td><a href="../project.yaml"><code>project.yaml</code></a></td>
<td>-</td>
<td>AppProject</td>
<td>Example project spec</td>
</tr>
</tbody>
</table>
<p>All resources, including <code>Application</code> and <code>AppProject</code> specs, have to be installed in the ArgoCD namespace (by default <code>argocd</code>). Also, ConfigMap and Secret resources need to be named as shown in the table above. For <code>Application</code> and <code>AppProject</code> resources, the name of the resource equals the name of the application or project within ArgoCD. This also means that application and project names are unique within the same ArgoCD installation - you cannot i.e. have the same application name for two different applications.</p>
<div class="admonition warning">
<p class="admonition-title">A note about ConfigMap resources</p>
<p>Be sure to annotate your ConfigMap resources using the label <code>app.kubernetes.io/part-of: argocd</code>, otherwise ArgoCD will not be able to use them.</p>
</div>
<h2 id="applications">Applications<a class="headerlink" href="#applications" title="Permanent link">&para;</a></h2>
<p>The Application CRD is the Kubernetes resource object representing a deployed application instance
in an environment. It is defined by two key pieces of information:</p>
<ul>
<li><code>source</code> reference to the desired state in Git (repository, revision, path, environment)</li>
<li><code>destination</code> reference to the target cluster and namespace. For the cluster one of server or name can be used, but not both (which will result in an error). Behind the hood when the server is missing, it is being calculated based on the name and then the server is used for any operations.</li>
</ul>
<p>A minimal Application spec is as follows:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Application</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">guestbook</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">project</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
  <span class="nt">source</span><span class="p">:</span>
    <span class="nt">repoURL</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://github.com/argoproj/argocd-example-apps.git</span>
    <span class="nt">targetRevision</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">HEAD</span>
    <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">guestbook</span>
  <span class="nt">destination</span><span class="p">:</span>
    <span class="nt">server</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://kubernetes.default.svc</span>
    <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">guestbook</span>
</code></pre></div>


<p>See <a href="../application.yaml">application.yaml</a> for additional fields. As long as you have completed the first step of <a href="../../getting_started/#1-install-argo-cd">Getting Started</a>, you can already apply this with <code>kubectl apply -n argocd -f application.yaml</code> and Argo CD will start deploying the guestbook application.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The namespace must match the namespace of your Argo cd, typically this is <code>argocd</code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When creating an application from a Helm repository, the <code>chart</code> attribute must be specified instead of the <code>path</code> attribute within <code>spec.source</code>.</p>
</div>
<div class="codehilite"><pre><span></span><code><span class="nt">spec</span><span class="p">:</span>
  <span class="nt">source</span><span class="p">:</span>
    <span class="nt">repoURL</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://argoproj.github.io/argo-helm</span>
    <span class="nt">chart</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argo</span>
</code></pre></div>


<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>By default, deleting an application will not perform a cascade delete, thereby deleting its resources. You must add the finalizer if you want this behaviour - which you may well not want.</p>
</div>
<div class="codehilite"><pre><span></span><code><span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">finalizers</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">resources-finalizer.argocd.argoproj.io</span>
</code></pre></div>


<h3 id="app-of-apps">App of Apps<a class="headerlink" href="#app-of-apps" title="Permanent link">&para;</a></h3>
<p>You can create an app that creates other apps, which in turn can create other apps.
This allows you to declaratively manage a group of app that can be deployed and configured in concert.</p>
<p>See <a href="../cluster-bootstrapping/">cluster bootstrapping</a>.</p>
<h2 id="projects">Projects<a class="headerlink" href="#projects" title="Permanent link">&para;</a></h2>
<p>The AppProject CRD is the Kubernetes resource object representing a logical grouping of applications.
It is defined by the following key pieces of information:</p>
<ul>
<li><code>sourceRepos</code> reference to the repositories that applications within the project can pull manifests from.</li>
<li><code>destinations</code> reference to clusters and namespaces that applications within the project can deploy into (don't use the name field, only server is being matched).</li>
<li><code>roles</code> list of entities with definitions of their access to resources within the project.</li>
</ul>
<p>An example spec is as follows:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AppProject</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">my-project</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
  <span class="c1"># Finalizer that ensures that project is not deleted until it is not referenced by any application</span>
  <span class="nt">finalizers</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">resources-finalizer.argocd.argoproj.io</span>
<span class="nt">spec</span><span class="p">:</span>
  <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Example Project</span>
  <span class="c1"># Allow manifests to deploy from any Git repos</span>
  <span class="nt">sourceRepos</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="s">&#39;*&#39;</span>
  <span class="c1"># Only permit applications to deploy to the guestbook namespace in the same cluster</span>
  <span class="nt">destinations</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">guestbook</span>
    <span class="nt">server</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://kubernetes.default.svc</span>
  <span class="c1"># Deny all cluster-scoped resources from being created, except for Namespace</span>
  <span class="nt">clusterResourceWhitelist</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">group</span><span class="p">:</span> <span class="s">&#39;&#39;</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Namespace</span>
  <span class="c1"># Allow all namespaced-scoped resources to be created, except for ResourceQuota, LimitRange, NetworkPolicy</span>
  <span class="nt">namespaceResourceBlacklist</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">group</span><span class="p">:</span> <span class="s">&#39;&#39;</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ResourceQuota</span>
  <span class="p p-Indicator">-</span> <span class="nt">group</span><span class="p">:</span> <span class="s">&#39;&#39;</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">LimitRange</span>
  <span class="p p-Indicator">-</span> <span class="nt">group</span><span class="p">:</span> <span class="s">&#39;&#39;</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">NetworkPolicy</span>
  <span class="c1"># Deny all namespaced-scoped resources from being created, except for Deployment and StatefulSet</span>
  <span class="nt">namespaceResourceWhitelist</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">group</span><span class="p">:</span> <span class="s">&#39;apps&#39;</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Deployment</span>
  <span class="p p-Indicator">-</span> <span class="nt">group</span><span class="p">:</span> <span class="s">&#39;apps&#39;</span>
    <span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">StatefulSet</span>
  <span class="nt">roles</span><span class="p">:</span>
  <span class="c1"># A role which provides read-only access to all applications in the project</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">read-only</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Read-only privileges to my-project</span>
    <span class="nt">policies</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">p, proj:my-project:read-only, applications, get, my-project/*, allow</span>
    <span class="nt">groups</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">my-oidc-group</span>
  <span class="c1"># A role which provides sync privileges to only the guestbook-dev application, e.g. to provide</span>
  <span class="c1"># sync privileges to a CI system</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ci-role</span>
    <span class="nt">description</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Sync privileges for guestbook-dev</span>
    <span class="nt">policies</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">p, proj:my-project:ci-role, applications, sync, my-project/guestbook-dev, allow</span>
    <span class="c1"># NOTE: JWT tokens can only be generated by the API server and the token is not persisted</span>
    <span class="c1"># anywhere by Argo CD. It can be prematurely revoked by removing the entry from this list.</span>
    <span class="nt">jwtTokens</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">iat</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1535390316</span>
</code></pre></div>


<h2 id="repositories">Repositories<a class="headerlink" href="#repositories" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some Git hosters - notably GitLab and possibly on-premise GitLab instances as well - require you to
specify the <code>.git</code> suffix in the repository URL, otherwise they will send a HTTP 301 redirect to the
repository URL suffixed with <code>.git</code>. ArgoCD will <strong>not</strong> follow these redirects, so you have to
adapt your repository URL to be suffixed with <code>.git</code>.</p>
</div>
<p>Repository credentials are stored in secret. Use following steps to configure a repo:</p>
<ol>
<li>Create secret which contains repository credentials. Consider using <a href="https://github.com/bitnami-labs/sealed-secrets">bitnami-labs/sealed-secrets</a> to store encrypted secret
definition as a Kubernetes manifest.</li>
<li>Register repository in the <code>argocd-cm</code> config map. Each repository must have <code>url</code> field and, depending on whether you connect using HTTPS or SSH, <code>usernameSecret</code> and <code>passwordSecret</code> (for HTTPS) or <code>sshPrivateKeySecret</code> (for SSH).</li>
</ol>
<p>Example for HTTPS:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app.kubernetes.io/name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
    <span class="nt">app.kubernetes.io/part-of</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">repositories</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">- url: https://github.com/argoproj/my-private-repository</span>
      <span class="no">passwordSecret:</span>
        <span class="no">name: my-secret</span>
        <span class="no">key: password</span>
      <span class="no">usernameSecret:</span>
        <span class="no">name: my-secret</span>
        <span class="no">key: username</span>
</code></pre></div>


<p>Example for SSH:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app.kubernetes.io/name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
    <span class="nt">app.kubernetes.io/part-of</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">repositories</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">- url: git@github.com:argoproj/my-private-repository</span>
      <span class="no">sshPrivateKeySecret:</span>
        <span class="no">name: my-secret</span>
        <span class="no">key: sshPrivateKey</span>
</code></pre></div>


<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The Kubernetes documentation has <a href="https://kubernetes.io/docs/concepts/configuration/secret/#use-case-pod-with-ssh-keys">instructions for creating a secret containing a private key</a>.</p>
</div>
<h3 id="repository-credentials">Repository Credentials<a class="headerlink" href="#repository-credentials" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Earlier than v1.4</p>
</blockquote>
<p>If you want to use the same credentials for multiple repositories, you can use <code>repository.credentials</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app.kubernetes.io/name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
    <span class="nt">app.kubernetes.io/part-of</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">repositories</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">- url: https://github.com/argoproj/private-repo</span>
    <span class="no">- url: https://github.com/argoproj/other-private-repo</span>
  <span class="nt">repository.credentials</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">- url: https://github.com/argoproj</span>
      <span class="no">passwordSecret:</span>
        <span class="no">name: my-secret</span>
        <span class="no">key: password</span>
      <span class="no">usernameSecret:</span>
        <span class="no">name: my-secret</span>
        <span class="no">key: username</span>
    <span class="no">- url: git@github.com:argoproj-labs</span>
      <span class="no">sshPrivateKeySecret:</span>
        <span class="no">name: my-secret</span>
        <span class="no">key: sshPrivateKey</span>
</code></pre></div>


<p>Argo CD will only use the credentials if you omit <code>usernameSecret</code>, <code>passwordSecret</code>, and <code>sshPrivateKeySecret</code> fields (<code>insecureIgnoreHostKey</code> is ignored) or if your repository is not listed in <code>repositories</code>.</p>
<p>A credential may be match if it's URL is the prefix of the repository's URL. The means that credentials may match, e.g in the above example both <a href="https://github.com/argoproj">https://github.com/argoproj</a> and <a href="https://github.com">https://github.com</a> would match. Argo CD selects the first one that matches.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Order your credentials with the most specific at the top and the least specific at the bottom.</p>
</div>
<p>A complete example.</p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app.kubernetes.io/name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
    <span class="nt">app.kubernetes.io/part-of</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">repositories</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no"># this has it&#39;s own credentials</span>
    <span class="no">- url: https://github.com/argoproj/private-repo</span>
      <span class="no">passwordSecret:</span>
        <span class="no">name: private-repo-secret</span>
        <span class="no">key: password</span>
      <span class="no">usernameSecret:</span>
        <span class="no">name: private-repo-secret</span>
        <span class="no">key: username</span>
      <span class="no">sshPrivateKeySecret:</span>
        <span class="no">name: private-repo-secret</span>
        <span class="no">key: sshPrivateKey</span>
    <span class="no">- url: https://github.com/argoproj/other-private-repo</span>
    <span class="no">- url: https://github.com/otherproj/another-private-repo</span>
  <span class="nt">repository.credentials</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no"># this will be used for the second repo</span>
    <span class="no">- url: https://github.com/argoproj</span>
      <span class="no">passwordSecret:</span>
        <span class="no">name: other-private-repo-secret</span>
        <span class="no">key: password</span>
      <span class="no">usernameSecret:</span>
        <span class="no">name: other-private-repo-secret</span>
        <span class="no">key: username</span>
      <span class="no">sshPrivateKeySecret:</span>
        <span class="no">name: other-private-repo-secret</span>
        <span class="no">key: sshPrivateKey</span>
    <span class="no"># this will be used for the third repo</span>
    <span class="no">- url: https://github.com</span>
      <span class="no">passwordSecret:</span>
        <span class="no">name: another-private-repo-secret</span>
        <span class="no">key: password</span>
      <span class="no">usernameSecret:</span>
        <span class="no">name: another-private-repo-secret</span>
        <span class="no">key: username</span>
      <span class="no">sshPrivateKeySecret:</span>
        <span class="no">name: another-private-repo-secret</span>
        <span class="no">key: sshPrivateKey</span>
</code></pre></div>


<blockquote>
<p>v1.4 or later</p>
</blockquote>
<p>If you want to use the same credentials for multiple repositories, you can use <code>repository.credentials</code> to configure credential templates. Credential templates can carry the same credentials information as repositories.</p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app.kubernetes.io/name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
    <span class="nt">app.kubernetes.io/part-of</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">repositories</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">- url: https://github.com/argoproj/private-repo</span>
    <span class="no">- url: https://github.com/argoproj/other-private-repo</span>
  <span class="nt">repository.credentials</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">- url: https://github.com/argoproj</span>
      <span class="no">passwordSecret:</span>
        <span class="no">name: my-secret</span>
        <span class="no">key: password</span>
      <span class="no">usernameSecret:</span>
        <span class="no">name: my-secret</span>
        <span class="no">key: username</span>
</code></pre></div>


<p>In the above example, every repository accessed via HTTPS whose URL is prefixed with <code>https://github.com/argoproj</code> would use a username stored in the key <code>username</code> and a password stored in the key <code>password</code> of the secret <code>my-secret</code> for connecting to Git.</p>
<p>In order for ArgoCD to use a credential template for any given repository, the following conditions must be met:</p>
<ul>
<li>The repository must either not be configured at all, or if configured, must not contain any credential information (i.e. contain none of <code>sshPrivateKeySecret</code>, <code>usernameSecret</code>, <code>passwordSecret</code> )</li>
<li>The URL configured for a credential template (e.g. <code>https://github.com/argoproj</code>) must match as prefix for the repository URL (e.g. <code>https://github.com/argoproj/argocd-example-apps</code>). </li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Matching credential template URL prefixes is done on a <em>best match</em> effort, so the longest (best) match will take precedence. The order of definition is not important, as opposed to pre v1.4 configuration.</p>
</div>
<p>The following keys are valid to refer to credential secrets:</p>
<h4 id="ssh-repositories">SSH repositories<a class="headerlink" href="#ssh-repositories" title="Permanent link">&para;</a></h4>
<ul>
<li><code>sshPrivateKeySecret</code> refers to a secret where an SSH private key is stored for accessing the repositories</li>
</ul>
<h4 id="https-repositories">HTTPS repositories<a class="headerlink" href="#https-repositories" title="Permanent link">&para;</a></h4>
<ul>
<li><code>usernameSecret</code> and <code>passwordSecret</code> refer to secrets where username and/or password are stored for accessing the repositories</li>
<li><code>tlsClientCertData</code> and <code>tlsClientCertKey</code> refer to secrets where a TLS client certificate (<code>tlsClientCertData</code>) and the corresponding private key <code>tlsClientCertKey</code> are stored for accessing the repositories</li>
</ul>
<h3 id="repositories-using-self-signed-tls-certificates-or-are-signed-by-custom-ca">Repositories using self-signed TLS certificates (or are signed by custom CA)<a class="headerlink" href="#repositories-using-self-signed-tls-certificates-or-are-signed-by-custom-ca" title="Permanent link">&para;</a></h3>
<blockquote>
<p>v1.2 or later</p>
</blockquote>
<p>You can manage the TLS certificates used to verify the authenticity of your repository servers in a ConfigMap object named <code>argocd-tls-certs-cm</code>. The data section should contain a map, with the repository server's hostname part (not the complete URL) as key, and the certificate(s) in PEM format as data. So, if you connect to a repository with the URL <code>https://server.example.com/repos/my-repo</code>, you should use <code>server.example.com</code> as key. The certificate data should be either the server's certificate (in case of self-signed certificate) or the certificate of the CA that was used to sign the server's certificate. You can configure multiple certificates for each server, e.g. if you are having a certificate roll-over planned.</p>
<p>If there are no dedicated certificates configured for a repository server, the system's default trust store is used for validating the server's repository. This should be good enough for most (if not all) public Git repository services such as GitLab, GitHub and Bitbucket as well as most privately hosted sites which use certificates from well-known CAs, including Let's Encrypt certificates.</p>
<p>An example ConfigMap object:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-tls-certs-cm</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app.kubernetes.io/name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
    <span class="nt">app.kubernetes.io/part-of</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">server.example.com</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">-----BEGIN CERTIFICATE-----</span>
    <span class="no">MIIF1zCCA7+gAwIBAgIUQdTcSHY2Sxd3Tq/v1eIEZPCNbOowDQYJKoZIhvcNAQEL</span>
    <span class="no">BQAwezELMAkGA1UEBhMCREUxFTATBgNVBAgMDExvd2VyIFNheG9ueTEQMA4GA1UE</span>
    <span class="no">BwwHSGFub3ZlcjEVMBMGA1UECgwMVGVzdGluZyBDb3JwMRIwEAYDVQQLDAlUZXN0</span>
    <span class="no">c3VpdGUxGDAWBgNVBAMMD2Jhci5leGFtcGxlLmNvbTAeFw0xOTA3MDgxMzU2MTda</span>
    <span class="no">Fw0yMDA3MDcxMzU2MTdaMHsxCzAJBgNVBAYTAkRFMRUwEwYDVQQIDAxMb3dlciBT</span>
    <span class="no">YXhvbnkxEDAOBgNVBAcMB0hhbm92ZXIxFTATBgNVBAoMDFRlc3RpbmcgQ29ycDES</span>
    <span class="no">MBAGA1UECwwJVGVzdHN1aXRlMRgwFgYDVQQDDA9iYXIuZXhhbXBsZS5jb20wggIi</span>
    <span class="no">MA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQCv4mHMdVUcafmaSHVpUM0zZWp5</span>
    <span class="no">NFXfboxA4inuOkE8kZlbGSe7wiG9WqLirdr39Ts+WSAFA6oANvbzlu3JrEQ2CHPc</span>
    <span class="no">CNQm6diPREFwcDPFCe/eMawbwkQAPVSHPts0UoRxnpZox5pn69ghncBR+jtvx+/u</span>
    <span class="no">P6HdwW0qqTvfJnfAF1hBJ4oIk2AXiip5kkIznsAh9W6WRy6nTVCeetmIepDOGe0G</span>
    <span class="no">ZJIRn/OfSz7NzKylfDCat2z3EAutyeT/5oXZoWOmGg/8T7pn/pR588GoYYKRQnp+</span>
    <span class="no">YilqCPFX+az09EqqK/iHXnkdZ/Z2fCuU+9M/Zhrnlwlygl3RuVBI6xhm/ZsXtL2E</span>
    <span class="no">Gxa61lNy6pyx5+hSxHEFEJshXLtioRd702VdLKxEOuYSXKeJDs1x9o6cJ75S6hko</span>
    <span class="no">Ml1L4zCU+xEsMcvb1iQ2n7PZdacqhkFRUVVVmJ56th8aYyX7KNX6M9CD+kMpNm6J</span>
    <span class="no">kKC1li/Iy+RI138bAvaFplajMF551kt44dSvIoJIbTr1LigudzWPqk31QaZXV/4u</span>
    <span class="no">kD1n4p/XMc9HYU/was/CmQBFqmIZedTLTtK7clkuFN6wbwzdo1wmUNgnySQuMacO</span>
    <span class="no">gxhHxxzRWxd24uLyk9Px+9U3BfVPaRLiOPaPoC58lyVOykjSgfpgbus7JS69fCq7</span>
    <span class="no">bEH4Jatp/10zkco+UQIDAQABo1MwUTAdBgNVHQ4EFgQUjXH6PHi92y4C4hQpey86</span>
    <span class="no">r6+x1ewwHwYDVR0jBBgwFoAUjXH6PHi92y4C4hQpey86r6+x1ewwDwYDVR0TAQH/</span>
    <span class="no">BAUwAwEB/zANBgkqhkiG9w0BAQsFAAOCAgEAFE4SdKsX9UsLy+Z0xuHSxhTd0jfn</span>
    <span class="no">Iih5mtzb8CDNO5oTw4z0aMeAvpsUvjJ/XjgxnkiRACXh7K9hsG2r+ageRWGevyvx</span>
    <span class="no">CaRXFbherV1kTnZw4Y9/pgZTYVWs9jlqFOppz5sStkfjsDQ5lmPJGDii/StENAz2</span>
    <span class="no">XmtiPOgfG9Upb0GAJBCuKnrU9bIcT4L20gd2F4Y14ccyjlf8UiUi192IX6yM9OjT</span>
    <span class="no">+TuXwZgqnTOq6piVgr+FTSa24qSvaXb5z/mJDLlk23npecTouLg83TNSn3R6fYQr</span>
    <span class="no">d/Y9eXuUJ8U7/qTh2Ulz071AO9KzPOmleYPTx4Xty4xAtWi1QE5NHW9/Ajlv5OtO</span>
    <span class="no">OnMNWIs7ssDJBsB7VFC8hcwf79jz7kC0xmQqDfw51Xhhk04kla+v+HZcFW2AO9so</span>
    <span class="no">6ZdVHHQnIbJa7yQJKZ+hK49IOoBR6JgdB5kymoplLLiuqZSYTcwSBZ72FYTm3iAr</span>
    <span class="no">jzvt1hxpxVDmXvRnkhRrIRhK4QgJL0jRmirBjDY+PYYd7bdRIjN7WNZLFsgplnS8</span>
    <span class="no">9w6CwG32pRlm0c8kkiQ7FXA6BYCqOsDI8f1VGQv331OpR2Ck+FTv+L7DAmg6l37W</span>
    <span class="no">+LB9LGh4OAp68ImTjqf6ioGKG0RBSznwME+r4nXtT1S/qLR6ASWUS4ViWRhbRlNK</span>
    <span class="no">XWyb96wrUlv+E8I=</span>
    <span class="no">-----END CERTIFICATE-----</span>
</code></pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>argocd-tls-certs-cm</code> ConfigMap will be mounted as a volume at the mount path <code>/app/config/tls</code> in the pods of <code>argocd-server</code> and <code>argocd-repo-server</code>. It will create files for each data key in the mount path directory, so above example would leave the file <code>/app/config/tls/server.example.com</code>, which contains the certificate data. It might take a while for changes in the ConfigMap to be reflected in your pods, depending on your Kubernetes configuration.</p>
</div>
<h3 id="ssh-known-host-public-keys">SSH known host public keys<a class="headerlink" href="#ssh-known-host-public-keys" title="Permanent link">&para;</a></h3>
<p>If you are connecting repositories via SSH, ArgoCD will need to know the SSH known hosts public key of the repository servers. You can manage the SSH known hosts data in the ConfigMap named <code>argocd-ssh-known-hosts-cm</code>. This ConfigMap contains a single key/value pair, with <code>ssh_known_hosts</code> as the key and the actual public keys of the SSH servers as data. As opposed to TLS configuration, the public key(s) of each single repository server ArgoCD will connect via SSH must be configured, otherwise the connections to the repository will fail. There is no fallback. The data can be copied from any existing <code>ssh_known_hosts</code> file, or from the output of the <code>ssh-keyscan</code> utility. The basic format is <code>&lt;servername&gt; &lt;keydata&gt;</code>, one entry per line.</p>
<p>An example ConfigMap object:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-ssh-known-hosts-cm</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app.kubernetes.io/name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
    <span class="nt">app.kubernetes.io/part-of</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">ssh_known_hosts</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">bitbucket.org ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAubiN81eDcafrgMeLzaFPsw2kNvEcqTKl/VqLat/MaB33pZy0y3rJZtnqwR2qOOvbwKZYKiEO1O6VqNEBxKvJJelCq0dTXWT5pbO2gDXC6h6QDXCaHo6pOHGPUy+YBaGQRGuSusMEASYiWunYN0vCAI8QaXnWMXNMdFP3jHAJH0eDsoiGnLPBlBp4TNm6rYI74nMzgz3B9IikW4WVK+dc8KZJZWYjAuORU3jc1c/NPskD2ASinf8v3xnfXeukU0sJ5N6m5E8VLjObPEO+mN2t/FZTMZLiFqPWc/ALSqnMnnhwrNi2rbfg/rd/IpL8Le3pSBne8+seeFVBoGqzHM9yXw==</span>
    <span class="no">github.com ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAq2A7hRGmdnm9tUDbO9IDSwBK6TbQa+PXYPCPy6rbTrTtw7PHkccKrpp0yVhp5HdEIcKr6pLlVDBfOLX9QUsyCOV0wzfjIJNlGEYsdlLJizHhbn2mUjvSAHQqZETYP81eFzLQNnPHt4EVVUh7VfDESU84KezmD5QlWpXLmvU31/yMf+Se8xhHTvKSCZIFImWwoG6mbUoWf9nzpIoaSjB+weqqUUmpaaasXVal72J+UX2B+2RPW3RcT0eOzQgqlJL3RKrTJvdsjE3JEAvGq3lGHSZXy28G3skua2SmVi/w4yCE6gbODqnTWlg7+wC604ydGXA8VJiS5ap43JXiUFFAaQ==</span>
    <span class="no">gitlab.com ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBFSMqzJeV9rUzU4kWitGjeR4PWSa29SPqJ1fVkhtj3Hw9xjLVXVYrU9QlYWrOLXBpQ6KWjbjTDTdDkoohFzgbEY=</span>
    <span class="no">gitlab.com ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAfuCHKVTjquxvt6CM6tdG4SLp1Btn/nOeHHE5UOzRdf</span>
    <span class="no">gitlab.com ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCsj2bNKTBSpIYDEGk9KxsGh3mySTRgMtXL583qmBpzeQ+jqCMRgBqB98u3z++J1sKlXHWfM9dyhSevkMwSbhoR8XIq/U0tCNyokEi/ueaBMCvbcTHhO7FcwzY92WK4Yt0aGROY5qX2UKSeOvuP4D6TPqKF1onrSzH9bx9XUf2lEdWT/ia1NEKjunUqu1xOB/StKDHMoX4/OKyIzuS0q/T1zOATthvasJFoPrAjkohTyaDUz2LN5JoH839hViyEG82yB+MjcFV5MU3N1l1QL3cVUCh93xSaua1N85qivl+siMkPGbO5xR/En4iEY6K2XPASUEMaieWVNTRCtJ4S8H+9</span>
    <span class="no">ssh.dev.azure.com ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC7Hr1oTWqNqOlzGJOfGJ4NakVyIzf1rXYd4d7wo6jBlkLvCA4odBlL0mDUyZ0/QUfTTqeu+tm22gOsv+VrVTMk6vwRU75gY/y9ut5Mb3bR5BV58dKXyq9A9UeB5Cakehn5Zgm6x1mKoVyf+FFn26iYqXJRgzIZZcZ5V6hrE0Qg39kZm4az48o0AUbf6Sp4SLdvnuMa2sVNwHBboS7EJkm57XQPVU3/QpyNLHbWDdzwtrlS+ez30S3AdYhLKEOxAG8weOnyrtLJAUen9mTkol8oII1edf7mWWbWVf0nBmly21+nZcmCTISQBtdcyPaEno7fFQMDD26/s0lfKob4Kw8H</span>
    <span class="no">vs-ssh.visualstudio.com ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC7Hr1oTWqNqOlzGJOfGJ4NakVyIzf1rXYd4d7wo6jBlkLvCA4odBlL0mDUyZ0/QUfTTqeu+tm22gOsv+VrVTMk6vwRU75gY/y9ut5Mb3bR5BV58dKXyq9A9UeB5Cakehn5Zgm6x1mKoVyf+FFn26iYqXJRgzIZZcZ5V6hrE0Qg39kZm4az48o0AUbf6Sp4SLdvnuMa2sVNwHBboS7EJkm57XQPVU3/QpyNLHbWDdzwtrlS+ez30S3AdYhLKEOxAG8weOnyrtLJAUen9mTkol8oII1edf7mWWbWVf0nBmly21+nZcmCTISQBtdcyPaEno7fFQMDD26/s0lfKob4Kw8H</span>
</code></pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>argocd-ssh-known-hosts-cm</code> ConfigMap will be mounted as a volume at the mount path <code>/app/config/ssh</code> in the pods of <code>argocd-server</code> and <code>argocd-repo-server</code>. It will create a file <code>ssh_known_hosts</code> in that directory, which contains the SSH known hosts data used by ArgoCD for connecting to Git repositories via SSH. It might take a while for changes in the ConfigMap to be reflected in your pods, depending on your Kubernetes configuration.</p>
</div>
<h2 id="clusters">Clusters<a class="headerlink" href="#clusters" title="Permanent link">&para;</a></h2>
<p>Cluster credentials are stored in secrets same as repository credentials but does not require entry in <code>argocd-cm</code> config map. Each secret must have label
<code>argocd.argoproj.io/secret-type: cluster</code>.</p>
<p>The secret data must include following fields:</p>
<ul>
<li><code>name</code> - cluster name</li>
<li><code>server</code> - cluster api server url</li>
<li><code>namespaces</code> - optional comma-separated list of namespaces which are accessible in that cluster. Cluster level resources would be ignored if namespace list is not empty.</li>
<li><code>config</code> - JSON representation of following data structure:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1"># Basic authentication settings</span>
<span class="nt">username</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="nt">password</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="c1"># Bearer authentication settings</span>
<span class="nt">bearerToken</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="c1"># IAM authentication configuration</span>
<span class="nt">awsAuthConfig</span><span class="p">:</span>
    <span class="nt">clusterName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class="nt">roleARN</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="c1"># Configure external command to supply client credentials</span>
<span class="c1"># See https://godoc.org/k8s.io/client-go/tools/clientcmd/api#ExecConfig</span>
<span class="nt">execProviderConfig</span><span class="p">:</span>
    <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class="nt">args</span><span class="p">:</span> <span class="p p-Indicator">[</span>
      <span class="nv">string</span>
    <span class="p p-Indicator">]</span>
    <span class="nt">env</span><span class="p">:</span> <span class="p p-Indicator">{</span>
<span class="nt">      key</span><span class="p">:</span> <span class="nv">value</span>
    <span class="p p-Indicator">}</span>
    <span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class="nt">installHint</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
<span class="c1"># Transport layer security configuration settings</span>
<span class="nt">tlsClientConfig</span><span class="p">:</span>
    <span class="c1"># PEM-encoded bytes (typically read from a client certificate file).</span>
    <span class="nt">caData</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class="c1"># PEM-encoded bytes (typically read from a client certificate file).</span>
    <span class="nt">certData</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class="c1"># Server should be accessed without verifying the TLS certificate</span>
    <span class="nt">insecure</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">boolean</span>
    <span class="c1"># PEM-encoded bytes (typically read from a client certificate key file).</span>
    <span class="nt">keyData</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
    <span class="c1"># ServerName is passed to the server for SNI and is used in the client to check server</span>
    <span class="c1"># certificates against. If ServerName is empty, the hostname used to contact the</span>
    <span class="c1"># server is used.</span>
    <span class="nt">serverName</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">string</span>
</code></pre></div>


<p>Note that if you specify a command to run under <code>execProviderConfig</code>, that command must be available in the ArgoCD image. See <a href="../custom_tools/#byoi-build-your-own-image">BYOI (Build Your Own Image)</a>.</p>
<p>Cluster secret example:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mycluster-secret</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">argocd.argoproj.io/secret-type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cluster</span>
<span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Opaque</span>
<span class="nt">stringData</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mycluster.com</span>
  <span class="nt">server</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">https://mycluster.com</span>
  <span class="nt">config</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">{</span>
      <span class="no">&quot;bearerToken&quot;: &quot;&lt;authentication token&gt;&quot;,</span>
      <span class="no">&quot;tlsClientConfig&quot;: {</span>
        <span class="no">&quot;insecure&quot;: false,</span>
        <span class="no">&quot;caData&quot;: &quot;&lt;base64 encoded certificate&gt;&quot;</span>
      <span class="no">}</span>
    <span class="no">}</span>
</code></pre></div>


<h2 id="helm-chart-repositories">Helm Chart Repositories<a class="headerlink" href="#helm-chart-repositories" title="Permanent link">&para;</a></h2>
<p>Non standard Helm Chart repositories have to be registered under the <code>repositories</code> key in the
<code>argocd-cm</code> ConfigMap. Each repository must have <code>url</code>, <code>type</code> and <code>name</code> fields. For private Helm repos you
may need to configure access credentials and HTTPS settings using <code>usernameSecret</code>, <code>passwordSecret</code>,
<code>caSecret</code>, <code>certSecret</code> and <code>keySecret</code> fields.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
  <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
  <span class="nt">namespace</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
  <span class="nt">labels</span><span class="p">:</span>
    <span class="nt">app.kubernetes.io/name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd-cm</span>
    <span class="nt">app.kubernetes.io/part-of</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">argocd</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="c1"># v1.2 or earlier use `helm.repositories`</span>
  <span class="nt">helm.repositories</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">- url: https://storage.googleapis.com/istio-prerelease/daily-build/master-latest-daily/charts</span>
      <span class="no">name: istio.io</span>
  <span class="c1"># v1.3 or later use `repositories` with `type: helm`</span>
  <span class="nt">repositories</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">- type: helm</span>
      <span class="no">url: https://storage.googleapis.com/istio-prerelease/daily-build/master-latest-daily/charts</span>
      <span class="no">name: istio.io</span>
    <span class="no">- type: helm</span>
      <span class="no">url: https://argoproj.github.io/argo-helm</span>
      <span class="no">name: argo</span>
      <span class="no">usernameSecret:</span>
        <span class="no">name: my-secret</span>
        <span class="no">key: username</span>
      <span class="no">passwordSecret:</span>
        <span class="no">name: my-secret</span>
        <span class="no">key: password</span>
      <span class="no">caSecret:</span>
        <span class="no">name: my-secret</span>
        <span class="no">key: ca</span>
      <span class="no">certSecret:</span>
        <span class="no">name: my-secret</span>
        <span class="no">key: cert</span>
      <span class="no">keySecret:</span>
        <span class="no">name: my-secret</span>
        <span class="no">key: key</span>
</code></pre></div>


<h2 id="resource-exclusioninclusion">Resource Exclusion/Inclusion<a class="headerlink" href="#resource-exclusioninclusion" title="Permanent link">&para;</a></h2>
<p>Resources can be excluded from discovery and sync so that ArgoCD is unaware of them. For example, <code>events.k8s.io</code> and <code>metrics.k8s.io</code> are always excluded. Use cases:</p>
<ul>
<li>You have temporal issues and you want to exclude problematic resources.</li>
<li>There are many of a kind of resources that impacts ArgoCD's performance.</li>
<li>Restrict ArgoCD's access to certain kinds of resources, e.g. secrets. See <a href="../security/#cluster-rbac">security.md#cluster-rbac</a>.</li>
</ul>
<p>To configure this, edit the <code>argcd-cm</code> config map:</p>
<div class="codehilite"><pre><span></span><code>kubectl edit configmap argocd-cm -n argocd
</code></pre></div>


<p>Add <code>resource.exclusions</code>, e.g.:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">resource.exclusions</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">- apiGroups:</span>
      <span class="no">- &quot;*&quot;</span>
      <span class="no">kinds:</span>
      <span class="no">- &quot;*&quot;</span>
      <span class="no">clusters:</span>
      <span class="no">- https://192.168.0.20</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
</code></pre></div>


<p>The <code>resource.exclusions</code> node is a list of objects. Each object can have:</p>
<ul>
<li><code>apiGroups</code> A list of globs to match the API group.</li>
<li><code>kinds</code> A list of kinds to match. Can be "*" to match all.</li>
<li><code>cluster</code> A list of globs to match the cluster.</li>
</ul>
<p>If all three match, then the resource is ignored.</p>
<p>In addition to exclusions, you might configure the list of included resources using the <code>resource.inclusions</code> setting.
By default, all resource group/kinds are included. The <code>resource.inclusions</code> setting allows customizing the list of included group/kinds: </p>
<div class="codehilite"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">data</span><span class="p">:</span>
  <span class="nt">resource.inclusions</span><span class="p">:</span> <span class="p p-Indicator">|</span>
    <span class="no">- apiGroups:</span>
      <span class="no">- &quot;*&quot;</span>
      <span class="no">kinds:</span>
      <span class="no">- Deployment</span>
      <span class="no">clusters:</span>
      <span class="no">- https://192.168.0.20</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
</code></pre></div>


<p>The <code>resource.inclusions</code> and <code>resource.exclusions</code> might be used together. The final list of resources includes group/kinds specified in <code>resource.inclusions</code> minus group/kinds
specified in <code>resource.exclusions</code> setting.</p>
<p>Notes:</p>
<ul>
<li>Quote globs in your YAML to avoid parsing errors.</li>
<li>Invalid globs result in the whole rule being ignored.</li>
<li>If you add a rule that matches existing resources, these will appear in the interface as <code>OutOfSync</code>.</li>
</ul>
<h2 id="sso-rbac">SSO &amp; RBAC<a class="headerlink" href="#sso-rbac" title="Permanent link">&para;</a></h2>
<ul>
<li>SSO configuration details: <a href="../user-management/">SSO</a></li>
<li>RBAC configuration details: <a href="../rbac/">RBAC</a></li>
</ul>
<h2 id="manage-argo-cd-using-argo-cd">Manage Argo CD Using Argo CD<a class="headerlink" href="#manage-argo-cd-using-argo-cd" title="Permanent link">&para;</a></h2>
<p>Argo CD is able to manage itself since all settings are represented by Kubernetes manifests. The suggested way is to create <a href="https://github.com/kubernetes-sigs/kustomize">Kustomize</a>
based application which uses base Argo CD manifests from <a href="https://github.com/argoproj/argo-cd/tree/stable/manifests">https://github.com/argoproj/argo-cd</a> and apply required changes on top.</p>
<p>Example of <code>kustomization.yaml</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="nt">bases</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">github.com/argoproj/argo-cd//manifests/cluster-install?ref=v1.0.1</span>

<span class="c1"># additional resources like ingress rules, cluster and repository secrets.</span>
<span class="nt">resources</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">clusters-secrets.yaml</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">repos-secrets.yaml</span>

<span class="c1"># changes to config maps</span>
<span class="nt">patchesStrategicMerge</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">overlays/argo-cd-cm.yaml</span>
</code></pre></div>


<p>The live example of self managed Argo CD config is available at <a href="https://cd.apps.argoproj.io">https://cd.apps.argoproj.io</a> and with configuration
stored at <a href="https://github.com/argoproj/argoproj-deployments/tree/master/argocd">argoproj/argoproj-deployments</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need to sign-in using your github account to get access to <a href="https://cd.apps.argoproj.io">https://cd.apps.argoproj.io</a></p>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../architecture/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Architectural Overview
              </div>
            </div>
          </a>
        
        
          <a href="../ingress/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Ingress Configuration
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.0ac82a11.min.js"></script>
      <script src="../../assets/javascripts/bundle.f81dfb4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="../../javascripts/extra.js"></script>
      
        <script src="../../js/version-select.js"></script>
      
    
  </body>
</html>